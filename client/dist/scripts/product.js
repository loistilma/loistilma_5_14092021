"use strict";(self.webpackChunkorinoco_frontend=self.webpackChunkorinoco_frontend||[]).push([[18],{773:(t,e,n)=>{n.d(e,{N:()=>s,I:()=>i});var r=n(558),a=n(880);class s extends r.gp{inner(t){return`\n            <a class="reset-a" href="/produit.html?id=${t._id}">\n                <div class="card mb-4 border-0">\n                    <img src="${t.imageUrl}" class="img-fluid" alt="Aperçu de la camera ${t.name}">\n                    <div class="card-body">\n                        <div class="d-flex justify-content-between">\n                            <div>\n                                <h2 class="card-title my-4">${t.name}</h2>\n                            </div>\n                            <div>\n                                <p class="my-4 card-text btn btn-primary rounded-pill">${(0,a.Y)(t.price)}</p>\n                            </div>\n                        </div>                            \n                        <p class="card-text mb-4">${t.description}</p>\n                    </div>\n                </div>\n            </a>\n            `}create(t){return this.createNode(this.inner(t))}}class i extends r.gp{inner(t){return`\n            <div class="card mb-4 border-0">\n                <div class="row g-0">\n                    <div class="col-sm-4">\n                        <img src="${t.imageUrl}" class="img-fluid" alt="Aperçu de la camera ${t.name}">\n                    </div>\n                    <div class="col-sm-8">\n                        <div class="card-body">\n                            <div class="d-flex justify-content-between">\n                            <div>\n                                <h2 class="card-title my-4">${t.name}</h2>\n                            </div>\n                            <div>\n                                <p class="my-4 card-text btn btn-primary rounded-pill">${(0,a.Y)(t.price)}</p>\n                            </div>\n                        </div>                            \n                        <p class="card-text mb-4">${t.description}</p>\n                        <div class="input-group mb-3">\n                            <label for="btnQuantity" class="input-group-text">Quantité</label>\n                            <span class="input-group-btn">\n                                <button type="button" id="minus" class="btn btn-default btn-number" disabled>\n                                    <span class="fas fa-minus"></span>\n                                </button>\n                            </span>\n                            <input type="text" id="btnQuantity" class="form-control" value="1">\n                            <span class="input-group-btn">\n                                <button type="button" id="plus" class="btn btn-default btn-number">\n                                    <span class="fas fa-plus"></span>\n                                </button>\n                            </span>\n                        </div>\n                        <div class="input-group mb-3">\n                            <label class="input-group-text" for="selectLenses">Lentilles</label>\n                            <select class="form-select" id="selectLenses">\n                                <option selected>Choisir...</option>\n                                ${t.lenses.map((t=>`<option>${t}</option>`)).join("")}\n                            </select>\n                        </div>\n                        <button class="btn btn-primary btn-md" id="addProduct">Ajouter au panier</button>\n                    </div>\n                </div>\n            </div>\n            `}btnQuantity(){var t=document.getElementById("btnQuantity"),e=document.getElementById("minus"),n=document.getElementById("plus");function r(){t.value>=10?n.setAttribute("disabled",""):n.removeAttribute("disabled"),t.value<=1?e.setAttribute("disabled",""):e.removeAttribute("disabled")}n.addEventListener("click",(()=>{t.value++,r()})),e.addEventListener("click",(()=>{t.value--,r()}))}create(t){this.createNode(this.inner(t)),this.btnQuantity()}}},161:(t,e,n)=>{n.d(e,{KY:()=>o,qU:()=>u,ts:()=>m,XW:()=>p});var r=n(9),a=n(558),s=n(880),i=n(274),d=n(102),l=n(82);function c(t={},e,n){if(t.el)document.querySelector(t.el).addEventListener(e,n);else if(t.els){document.querySelectorAll(t.els).forEach((t=>{t.addEventListener(e,n)}))}}const o=t=>c({el:"#addProduct"},"click",(()=>{try{i.N.add(t),(0,d.F)()}catch(t){(0,r.j)("#error","Erreur lors de l'ajout d'un article au panier","danger",!1),console.error(t)}})),u=()=>c({els:".delProduct"},"click",(t=>{try{let e=t.target.closest("button").dataset.id;i.N.del(e),b(),t.target.style.setProperty("--animate-duration","1s"),h(t.target.closest("button"),2),(0,d.F)()}catch(t){(0,r.j)("#error","Erreur lors de la suppression d'un produit","danger",!1),console.error(t)}})),p=()=>c({els:"[id^=cartQuantity]"},"change",(t=>{try{let e=t.target.dataset.id;i.N.updateQuantity(e,t.target),function(t,e){let n=i.N.find(e),r=(0,a.Ow)(t,2).nextElementSibling;r.style.setProperty("--animate-duration","0.3s"),(0,l.V)(r,"fadeOut").then((()=>{(0,l.V)(r,"fadeIn"),r.innerHTML=(0,s.Y)(n.price*n.quantity)}))}(t.target,e),b(),(0,d.F)()}catch(t){(0,r.j)("#error","Erreur lors du changement de quantité","danger",!1),console.error(t)}})),m=()=>c({el:"#clearCart"},"click",(t=>{try{i.N.delAll(),h(t.target.closest("button"),4),(0,d.F)()}catch(t){(0,r.j)("#error","Erreur lors de la suppression du panier","danger",!1),console.error(t)}}));function b(){let t=document.getElementById("totalPrice"),e=document.getElementById("totalProduct");e.style.setProperty("--animate-duration","0.65s"),t.style.setProperty("--animate-duration","0.65s"),(0,l.V)(t,"fadeOut").then((()=>{(0,l.V)(t,"fadeIn"),t.innerHTML=`<b>${(0,s.Y)(i.N.totalPrice())}</b>`})),(0,l.V)(e,"fadeOut").then((()=>{(0,l.V)(e,"fadeIn"),e.innerHTML=`<b>${i.N.count()} articles</b>`}))}function h(t,e){let n=(0,a.Ow)(t,e);n.style.setProperty("--animate-duration","1s"),(0,l.V)(n,"bounceOut").then((()=>{n.remove(),i.N.isEmpty()&&(document.querySelector(".table-responsive").innerHTML="Votre panier est vide",document.querySelector("#formSection").remove())}))}},102:(t,e,n)=>{n.d(e,{F:()=>a});var r=n(274);function a(){var t=document.getElementById("cart-nb");if(t&&0===r.N.count()||void 0===r.N.count())t.innerHTML="";else{let t=`\n            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">\n                ${r.N.count()}\n                <span class="visually-hidden">Articles du panier</span>\n            </span>\n            `;document.getElementById("cart-nb").innerHTML=t}}},628:(t,e,n)=>{var r=n(506),a=n(773),s=n(161),i=n(9),d=n(102);const l=new r._("http://localhost:3000");(0,d.F)(),async function(){const t=window.location.href,e=new URL(t).searchParams.get("id");try{const t=new a.I("div",{class:"col"},"#cardSection"),n=await l.get(`/api/cameras/${e}`);t.create(n),(0,s.KY)(n)}catch(t){(0,i.j)("#main .container","Erreur lors du traitement des données","danger",!1),console.error(t)}}()},506:(t,e,n)=>{n.d(e,{_:()=>r});class r{constructor(t,e){this.baseURL=t,this.headers=e}async get(t){return(await fetch(this.baseURL+t,{method:"GET"})).json()}async post(t,e){return(await fetch(this.baseURL+t,{method:"POST",headers:this.headers,body:JSON.stringify(e)})).json()}}},880:(t,e,n)=>{function r(t){var e=t/100+".00";return Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(e)}n.d(e,{Y:()=>r})},274:(t,e,n)=>{n.d(e,{N:()=>s,y:()=>i});var r=n(9);class a{constructor(t){this.name=t}init(){if(null===this.get())var t=[];else t=this.get();return t}set(t){return localStorage.setItem(this.name,JSON.stringify(t))}get(){return JSON.parse(localStorage.getItem(this.name))}find(t){return this.get().find((e=>e._id===t))}updateQuantity(t,e){var n=this.get(),r=n.find((e=>e._id===t)),a=parseInt(e.value);r&&(r.quantity=parseInt(a)),this.set(n)}del(t){var e=this.get().findIndex((e=>e._id===t)),n=this.get();n.splice(e,1),this.set(n)}delAll(){localStorage.removeItem(this.name)}totalPrice(){let t=0;return this.get().forEach((e=>{t+=e.price*e.quantity})),t}isEmpty(){if(null===this.get()||0===this.get().length)return!0}}const s=new class extends a{add(t){this.set(this.init());let e=this.get();var n=e.find((e=>e._id===t._id));t.quantity=parseInt(document.getElementById("btnQuantity").value),n?n.quantity>=10?(0,r.j)(".card-body","Il ne reste que 10 produits en stock","danger",!0):(n.quantity+=parseInt(t.quantity),(0,r.j)(".card-body","Le produit a été ajouter au panier","success",!0)):(e.push({name:t.name,imageUrl:t.imageUrl,_id:t._id,quantity:t.quantity,price:t.price}),(0,r.j)(".card-body","Le produit a été ajouter au panier","success",!0)),this.set(e)}count(){var t;if(null!==this.get()&&0!==this.get())return t=0,this.get().forEach((e=>{t+=e.quantity})),t;t=null}}("cart"),i=new class extends a{total(){let t=0;return s.get().forEach((e=>{t+=e.price*e.quantity})),t}add(t){this.set(this.init());let e=this.get(),n=new Date;e.push({contact:t.contact,orderId:t.orderId,products:t.products,date:n,totalPrice:this.total()}),this.set(e)}}("confirmation")}},t=>{var e;e=628,t(t.s=e)}]);